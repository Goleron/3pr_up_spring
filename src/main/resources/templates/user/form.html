<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div th:replace="~{fragments/navigation :: navbar}"></div>

<div class="container mt-4">
    <h2 th:text="${user.id != null} ? '‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' : '‚ûï –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'"></h2>

    <form th:action="@{${user.id != null} ? '/users/' + ${user.id} : '/users'}"
          th:object="${user}" method="post" class="needs-validation" novalidate>

        <input type="hidden" th:field="*{id}" />

        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *</label>
                <input type="text" th:field="*{username}" class="form-control" required
                       minlength="3" maxlength="50" placeholder="–õ–æ–≥–∏–Ω"/>
                <div th:if="${#fields.hasErrors('username')}" class="text-danger" th:errors="*{username}"></div>
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">Email *</label>
                <input type="email" th:field="*{email}" class="form-control" required
                       placeholder="user@example.com"/>
                <div th:if="${#fields.hasErrors('email')}" class="text-danger" th:errors="*{email}"></div>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">–ü–∞—Ä–æ–ª—å <span th:if="${user.id != null}" class="text-muted">(–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å)</span></label>
            <input type="password" th:field="*{password}" class="form-control"
                   th:required="${user.id == null}"
                   minlength="6"
                   placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"/>
            <div th:if="${#fields.hasErrors('password')}" class="text-danger" th:errors="*{password}"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">–†–æ–ª–∏</label>
            <div th:each="role : ${allRoles}" class="form-check">
                <input type="checkbox" th:field="*{roles}" th:value="${role.id}"
                       class="form-check-input" th:id="'role-' + ${role.id}"/>
                <label th:for="'role-' + ${role.id}" class="form-check-label" th:text="${role.name}"></label>
            </div>
            <small class="text-muted">–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π</small>
        </div>

        <div class="btn-group" role="group">
            <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <a th:href="@{/users}" class="btn btn-secondary">‚Ü©Ô∏è –û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>